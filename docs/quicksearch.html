<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"dialogs_alert.js.html":{"id":"dialogs_alert.js.html","title":"Source: dialogs/alert.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: dialogs/alert.js /** @module */ import {sweetAlert} from 'sweetalert2'; import 'styles/sweetalert2.scss'; /** * A SweetAlert2 alert dialog * @param {string} title - the primary message of the alert * @param {string} text - the secondary message of the alert * @param {string} [type='error'] - the type of the alert */ export default (title, text, type='error') =&gt; sweetAlert({title, text, type}); × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"dialogs_confirm.js.html":{"id":"dialogs_confirm.js.html","title":"Source: dialogs/confirm.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: dialogs/confirm.js /** @module */ import {sweetAlert} from 'sweetalert2'; import 'styles/sweetalert2.scss'; /** * A SweetAlert2 confirmation dialog * @param {string} text */ export default (text, callback) =&gt; sweetAlert({ text: text, type: 'question', showCancelButton: true, confirmButtonText: 'Yes', cancelButtonText: 'No', buttonsStyling: true, closeOnConfirm: true, closeOnCancel: true }).then(callback); × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"dialogs_index.js.html":{"id":"dialogs_index.js.html","title":"Source: dialogs/index.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: dialogs/index.js /** @module */ import alert from './alert'; import confirm from './confirm'; export default {alert, confirm}; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"lib_lodash.js.html":{"id":"lib_lodash.js.html","title":"Source: lib/lodash.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: lib/lodash.js /** @module */ import get from 'lodash.get'; export default { get }; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"lib_util.js.html":{"id":"lib_util.js.html","title":"Source: lib/util.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: lib/util.js /** @module */ import $script from 'scriptjs'; /** * Resolves external dependencies in order using script.js * * @example &lt;caption&gt;From the module, export `dependencies` as an array of URLs&lt;/caption&gt; * export const dependencies = [ * '//cdnjs.cloudflare.com/ajax/libs/jsforce/1.6.0/jsforce.min.js' * ]; * * @example &lt;caption&gt;If `dependencies` is not an export, also checks for a `config` export&lt;/caption&gt; * // config.json * {&quot;dependencies&quot;: [&quot;//cdnjs.cloudflare.com/ajax/libs/jsforce/1.6.0/jsforce.min.js&quot;]} * * // index.js * import config from './config.json'; * export {config}; * * @see [github.com/ded/script.js]{@link https://github.com/ded/script.js/} */ export function resolveExternal(mod, callback) { let deps; if (mod.dependencies instanceof Array) { deps = mod.dependencies; } else if (mod.config != null &amp;&amp; mod.config.dependencies instanceof Array) { deps = mod.config.dependencies; } if (deps == null) { return callback(); } const len = deps.length; const loadScript = (i=0) =&gt; { $script(deps[i], i); $script.ready(i, () =&gt; { if (++i &lt; len) { loadScript(i); } else { $script.done('bundle'); } }); }; loadScript(); $script.ready('bundle', callback); }; /** * Parse `require.context` output * @param {Object} context - the return value of `require.context(...)` * @returns {Object} the modules keyed by their name */ export function parseContext(context) { const contextKeys = context.keys(); const modules = {}; contextKeys.forEach(key =&gt; modules[key.replace(/^\\.\\//, '').replace(/\\.js$/, '')] = context(key) ); return modules; }; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"modules_Contact_Say_Name_index.js.html":{"id":"modules_Contact_Say_Name_index.js.html","title":"Source: modules/Contact/Say_Name/index.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: modules/Contact/Say_Name/index.js /** * &quot;Say Name&quot; custom button on Contact. * This is an example module. * @module * @see module:weblinks */ import dialogs from 'dialogs'; import config from './config.json'; export {config}; /** * Keep track of the number of times the user has clicked the button */ let timesClicked = 0; /** * Get a random element from the given Array * @param {Array} arr - the Array * @returns a random element from the Array */ const getRandomElement = (arr) =&gt; arr[Math.floor(Math.random() * arr.length)]; /** * @param {Object} params - the parameters passed to this module * @param {string} params.sessionId - `{!$Api.Session_ID}` * @param {string} params.userDisplayName - `'{!$User.FirstName} {!$User.LastName}'` * @param {string} params.contactId - `{!Contact.Id}` * @example &lt;caption&gt;Save the following in a Javascript button for Contact&lt;/caption&gt; * {!REQUIRESCRIPT('/resource/weblinkjs/weblinks.js')} * 'use strict'; * weblinks.invoke('Contact/Say_Name', { * sessionId: '{!API.Session_ID}', * userDisplayName: '{!$User.FirstName} {!$User.LastName}', * contactId: '{!Contact.Id}' * }); */ export function exec({sessionId, userDisplayName, contactId}) { let conn = new jsforce.Connection({sessionId}); const greeting = getRandomElement(config.greetings); const alertType = getRandomElement(config.alertTypes); // Get this contact's record, then show a message conn.sobject('Contact').retrieve(contactId, (err, contact) =&gt; { if (err) { return alert(err); } const s = ++timesClicked &gt; 1 ? 's' : ''; dialogs.alert( `${greeting} ${userDisplayName}!`, `This contact's name is ${contact.FirstName} ${contact.LastName}, ` + `and you've clicked this button ${timesClicked} time${s}.`, alertType ); }); }; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"modules_index.js.html":{"id":"modules_index.js.html","title":"Source: modules/index.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: modules/index.js /** * Exports module groups (i.e. by SObjectType folder) * @module */ import Contact from './Contact'; export default { Contact }; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Source: index.js /** * Main entry point * @module weblinks */ import 'babel-polyfill'; import $script from 'scriptjs'; import modules from 'modules'; import {resolveExternal} from 'lib/util'; import _ from './lib/lodash'; /** * Invoke a named module * @example &lt;caption&gt;Invoke module via the weblink's javascript&lt;/caption&gt; * {!REQUIRESCRIPT('/resource/weblinkjs/weblinks.js')} * weblinks.invoke('some_module_name', params); * @param {string} name - relative path to the module under `src/modules` * @param {Object} [params={}] - named parameters to pass through to the module */ export function invoke(name, params={}) { if (typeof name !== 'string') { throw new Error('first param to invoke() must be a string'); } const mod = _.get(modules, name.replace('/', '.')); if (mod == null) { throw new Error(`module '${name}' does not exist`); } resolveExternal(mod, () =&gt; mod.exec(params)); }; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Modules × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks weblinkjs API Documentation An abstraction built around building, deploying, and invoking Javascript through custom buttons/links (weblinks) in Salesforce. Including an added benefit of developing using ES6 Javascript (with Babel). The project may be used as a template for centralizing an org's custom weblink javascript. Either fork this repository through Github, or clone and push to your own public/private remote. UsageBy convention, code for each weblink is defined inside a javascript module with paths that conform to modules/&lt;SObjectType&gt;/&lt;Weblink API Name&gt;/index.js. Note, this isn't strictly enforced, so you may adapt using your own naming conventions, as long as the modules reside in src/modules/. Since these are self-contained modules, code stored on the weblink itself is fairly minimal: {!REQUIRESCRIPT('/resource/weblinkjs/weblinks.js')} weblinks.invoke('Account/My_Custom_Weblink');Whereas its module would implement the logic: // src/modules/Account/My_Custom_Weblink/index.js export function exec(params) { alert('hello world!'); };ExampleSee Contact/Say_Name ParametersOne minor drawback of moving code to static resources is that merge fields cannot be parsed. To get around this limitation, you can pass them as named parameters for the module to parse. {!REQUIRESCRIPT('/resource/weblinkjs')} 'use strict'; weblinks.invoke('Account/My_Custom_Weblink', { sessionId: '{!API.Session_ID}', id: '{!Work_Order__c.Id}' });Be aware that other than the record's Id, most values cannot be relied on to be up-to-date. Merge fields are only evaluated once; i.e. the moment before the page is loaded. One potentially common scenario where this would be problematic occurs when one user (Bob) opens a record's detail page, then a few moments later, the same user (or some other, doesn't matter) makes some field update that would result in the value differing from the value it was the moment before the page was initially loaded by Bob. In this scenario, if Bob then clicks a javascript button using merge fields, the data he'd be using will now be out-of-date. A solution to the above scenario is to only pass the record's Id, and use Ajax to query the record every time the button is clicked (using Salesforce's connection.js or jsforce via CDN). Note that this has a downside of its own, which is that it counts against the limit of API calls your org can make in a single day. DevelopmentRequirements: Node.js Git Some kind of shell prompt Good options for Windows are Cygwin or Git BASH (included in the Windows Git installation). Launch a Bash-like shell, clone this repo to where your projects live, then install: npm installNow you may either edit an existing module, located in modules, or create a new one. To create a module for a weblink, create a folder for the module with the path modules/&lt;SObjectType&gt;/&lt;Weblink API Name&gt;/. Create a folder if one doesn't already exist for the SObjectType. Also create an index.js file that will be used solely to import modules of this type and export them to modules/index.js (of which will also need to be edited to include the new SObjectType folder). In the module's folder, create index.js, which will be the module's entry point. An example template for index.js: export const dependencies = [ '//mycdn.com/path/to/cdn/resource' ]; export function exec(params) { // ... your weblink code goes here, parsing params as you see fit ... };Remember to also add code for invoking the module in the weblink itself, as shown in the Usage section above. Once you're done making changes, build the library: npm run buildThen deploy using your Salesforce credentials: npm run deploy -- -u &lt;username&gt; -p &lt;password&gt; -t &lt;security token&gt; -l https://test.salesforce.comTo save time, you could build and deploy at the same time: npm run build &amp;&amp; npm run deploy -- -u &lt;username&gt; -p &lt;password&gt; -t &lt;security token&gt; -l https://test.salesforce.com × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-dialogs_alert.html":{"id":"module-dialogs_alert.html","title":"Module: dialogs/alert","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: dialogs/alert (require(&quot;dialogs/alert&quot;))(title, text, type) A SweetAlert2 alert dialog Parameters: Name Type Argument Default Description title string the primary message of the alert text string the secondary message of the alert type string &lt;optional&gt; 'error' the type of the alert Source: dialogs/alert.js, line 11 × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-dialogs_confirm.html":{"id":"module-dialogs_confirm.html","title":"Module: dialogs/confirm","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: dialogs/confirm (require(&quot;dialogs/confirm&quot;))(text) A SweetAlert2 confirmation dialog Parameters: Name Type Description text string Source: dialogs/confirm.js, line 9 × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-dialogs_index.html":{"id":"module-dialogs_index.html","title":"Module: dialogs/index","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: dialogs/index Source: dialogs/index.js, line 1 × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-lib_lodash.html":{"id":"module-lib_lodash.html","title":"Module: lib/lodash","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: lib/lodash Source: lib/lodash.js, line 1 × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-lib_util.html":{"id":"module-lib_util.html","title":"Module: lib/util","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: lib/util Source: lib/util.js, line 1 Methods &lt;static&gt; parseContext(context) Parse require.context output Parameters: Name Type Description context Object the return value of require.context(...) Source: lib/util.js, line 52 Returns: the modules keyed by their name Type Object &lt;static&gt; resolveExternal() Resolves external dependencies in order using script.js Source: lib/util.js, line 22 See: github.com/ded/script.js Examples From the module, export `dependencies` as an array of URLs export const dependencies = [ '//cdnjs.cloudflare.com/ajax/libs/jsforce/1.6.0/jsforce.min.js' ]; If `dependencies` is not an export, also checks for a `config` export // config.json {&quot;dependencies&quot;: [&quot;//cdnjs.cloudflare.com/ajax/libs/jsforce/1.6.0/jsforce.min.js&quot;]} // index.js import config from './config.json'; export {config}; × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-modules_Contact_Say_Name_index.html":{"id":"module-modules_Contact_Say_Name_index.html","title":"Module: modules/Contact/Say_Name/index","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: modules/Contact/Say_Name/index &quot;Say Name&quot; custom button on Contact. This is an example module. Source: modules/Contact/Say_Name/index.js, line 1 See: module:weblinks Members &lt;inner&gt; timesClicked Keep track of the number of times the user has clicked the button Source: modules/Contact/Say_Name/index.js, line 15 Methods &lt;static&gt; exec(params) Parameters: Name Type Description params Object the parameters passed to this module Properties Name Type Description sessionId string {!$Api.Session_ID} userDisplayName string '{!$User.FirstName} {!$User.LastName}' contactId string {!Contact.Id} Source: modules/Contact/Say_Name/index.js, line 38 Example Save the following in a Javascript button for Contact {!REQUIRESCRIPT('/resource/weblinkjs/weblinks.js')} 'use strict'; weblinks.invoke('Contact/Say_Name', { sessionId: '{!API.Session_ID}', userDisplayName: '{!$User.FirstName} {!$User.LastName}', contactId: '{!Contact.Id}' }); &lt;inner&gt; getRandomElement(arr) Get a random element from the given Array Parameters: Name Type Description arr Array the Array Source: modules/Contact/Say_Name/index.js, line 22 Returns: a random element from the Array × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-modules_index.html":{"id":"module-modules_index.html","title":"Module: modules/index","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: modules/index Exports module groups (i.e. by SObjectType folder) Source: modules/index.js, line 1 × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "},"module-weblinks.html":{"id":"module-weblinks.html","title":"Module: weblinks","body":" weblinkjs Modules dialogs/alertdialogs/confirmdialogs/indexlib/lodashlib/utilmodules/Contact/Say_Name/indexmodules/indexweblinks Module: weblinks Main entry point Source: index.js, line 1 Methods &lt;static&gt; invoke(name, params) Invoke a named module Parameters: Name Type Argument Default Description name string relative path to the module under src/modules params Object &lt;optional&gt; {} named parameters to pass through to the module Source: index.js, line 19 Example Invoke module via the weblink's javascript {!REQUIRESCRIPT('/resource/weblinkjs/weblinks.js')} weblinks.invoke('some_module_name', params); × Search results Close Documentation generated by JSDoc 3.4.0 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
